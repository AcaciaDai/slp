<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>SLP: CakePHP: Getting Started</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../markdown.css" type="text/css" />
</head>
<body>
<h1 id="slp-cakephp-getting-started">SLP: CakePHP: Getting Started</h1>
<p><a href="index.html">Go up to the main SLP documents page</a> (<a href="index.md">md</a>)</p>
<p>To get a CakePHP website up and running:</p>
<ul>
<li>Make sure your webserver is configured for CakePHP; you need to have URL rewriting turned on. See the <a href="virtualbox-image-details.html">VirtualBox image details</a> (<a href="virtualbox-image-details.md">md</a>) page for how to do this</li>
<li>You should have your MySQL datbase and login information ready, as you will need that soon.</li>
<li>download the latest stable version from http://cakephp.org/ - as of the writing of this tutorial (Aug 31, 2014), the latest stable version is 2.5.3 (however, version 3.0.0 is just about to be released...)</li>
<li>unzip it somewhere in your web directory (likely somewhere in <code>~mst3k/html/cakephp/</code>)
<ul>
<li>you probably want to rename the root zip directory (which will be something like cakephp-cakephp-ac41b42/) to something relevant (such as the previuosly mentioned cakephp/) -- take note of the non-domain part of the URL, as we will need this later. If the CakePHP files are at http://server/~mst3k/cakephp/ (where &quot;server&quot; is the server used for the course), then we will need to remember the <code>/~mst3k/cakephp/</code> part</li>
</ul></li>
<li>configure the CakePHP installation
<ul>
<li>there are three .htaccess files (in the root CakePHP directory, in app/, and in app/webroot/). Each one will need to be edited and a line like <code>RewriteBase /~mst3k/cakephp/</code> put in. Put this in as the third line (after the <code>&lt;IfModule mod_rewrite.c&gt;</code> and <code>RewriteEngine on</code> lines). This URL part should be what you remembered from above.</li>
<li>in app/Config/, copy database.php.default to database.php, and edit the first array (the <code>public $default = array(</code> one) changing three lines: login (your MySQL userid), password, and database name (likely your userid if you are doing this on a departmental server). Note that the other values (datasource and host) should be left to their defaults.</li>
<li>edit app/Config/core.php, and change two values: Security.salt and Security.cipherSeed. Change them to some other random value of the same length. Note that the first is alphanumeric, whereas the second is just numeric.</li>
</ul></li>
<li>the app/tmp directory must be writable. From the root CakePHP directory, enter <code>chmod -R 777 app/tmp/</code></li>
<li>At this point, you should be able to view the page. It should look <strong>exactly</strong> like the image below</li>
<li>Note that all the boxes are green! If <strong>ANY</strong> of them are yellow or red, then something is wrong, and it is not configured properly</li>
<li>Also note that there are <strong>NOT</strong> a bunch of lines of text at the top indicating that it cannot write to the cache directory; this means that you did not execute the chmod command properly</li>
</ul>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>If you are getting &quot;internal server error&quot; messages when viewing your CakePHP site, there are two things to try: - make sure your .htaccess files (all three!) have the RewriteBase line added - view the Apache error logs - see the [Linux Administration] page for how to do this</p>
<p>If you are receiving an error such as:</p>
<p><code>Warning (512): SplFileInfo::openFile(/home/slp/mst3k/html/blog/app/tmp/cache/models/myapp_cake_model_default_pal4ka_list): failed to open stream: Permission denied [CORE/Cake/Cache/Engine/FileEngine.php, line 313]</code></p>
<p>... then your app/tmp directory is not writable. Run <code>chmod -R 777 ~/html/cakephp/app/tmp</code> (where <code>~/html/cakephp/app/tmp</code> is the path to CakePHP's app/tmp directory).</p>
<h3 id="that-image">That image</h3>
<div class="figure">
<img src="images/cakephp-initial.png" />
</div>
</body>
</html>
